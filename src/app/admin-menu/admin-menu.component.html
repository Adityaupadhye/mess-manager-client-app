<app-navbar></app-navbar>

<div class="max-w-7xl mx-auto space-y-6 p-4 md:p-8">

  <!-- WEEK MENU UPLOAD -->
  <div class="bg-white shadow-sm border rounded-2xl p-6">
    <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
      <span class="material-icons text-orange-600">upload_file</span>
      Upload Weekly Menu (.csv)
    </h3>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="md:col-span-2">
        <label class="text-sm font-medium">Select CSV File</label>
        <input type="file" accept=".csv" (change)="onFileSelected($event)" class="w-full border rounded-xl px-3 py-2" />
      </div>

      <div class="flex items-end">
        <button (click)="uploadMenu()" [disabled]="!selectedFile"
          class="w-full bg-orange-600 hover:bg-orange-700 disabled:bg-black text-white py-2 rounded-xl">
          Upload Menu
        </button>
        <p *ngIf="message" class="text-green-600">{{ message }}</p>
        <p *ngIf="error" class="text-red-600">{{ error }}</p>
      </div>
    </div>

    <p *ngIf="selectedFile" class="text-sm mt-3 text-gray-600">
      Selected: {{ selectedFile.name }}
    </p>
  </div>


  <!-- WEEKLY TABS (same UI as student) -->
  <div class="flex gap-3 overflow-x-auto pb-2">
    <button *ngFor="let d of weekMenu" class="px-6 py-2 rounded-xl border text-sm font-medium transition" [ngClass]="{
        'bg-black text-white border-orange-600': selectedDay === d,
        'bg-white text-gray-700 border-gray-300': selectedDay !== d
      }" (click)="selectDay(d)">
      {{d.day}}
    </button>
  </div>

  <!-- Today Detailed Meals (From API) -->
  <div *ngFor="let meal of meals" class="p-6 bg-white shadow-sm border rounded-2xl">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-10 h-10 rounded-xl flex items-center justify-center" [ngClass]="{
    'bg-yellow-100 text-yellow-700': meal === 'breakfast',
    'bg-red-100 text-red-700': meal === 'lunch',
    'bg-purple-100 text-purple-700': meal === 'snacks',
    'bg-blue-100 text-blue-700': meal === 'dinner'
  }">
        <span class="material-icons">
          {{
          meal === 'breakfast' ? 'free_breakfast' :
          meal === 'lunch' ? 'ramen_dining' :
          meal === 'snacks' ? 'cookie' :
          'nightlight_round'
          }}
        </span>
      </div>


      <div>
        <h4 class="text-lg capitalize font-semibold">{{ meal }}</h4>
        <p class="text-sm text-gray-600">
          {{
          meal === 'breakfast' ? '7:30 AM – 9:45 AM' :
          meal === 'lunch' ? '12:30 PM – 2:15 PM' :
          meal === 'snacks' ? '4:30 PM – 6:15 PM' :
          '7:30 PM – 9:45 PM'
          }}
        </p>
      </div>
    </div>

    <!-- Items from API -->
    <div class="flex flex-wrap gap-2">
      <span *ngFor="let item of selectedDay[meal]" class="px-3 py-1 border rounded-lg bg-gray-50 text-sm">
        {{ item }}
      </span>

      <span *ngIf="selectedDay[meal].length === 0" class="text-gray-400 text-sm">
        No items
      </span>
    </div>
  </div>
</div>