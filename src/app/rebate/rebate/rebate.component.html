<app-navbar></app-navbar>
<div class="container min-h-screen bg-gray-50">
  <div class="min-h-screen bg-gray-50">

    <div class="p-6 space-y-6">

      <!-- Tabs (inside container again — fixed spacing) -->
      <div class="flex w-full justify-between bg-gray-100 rounded-full p-1 text-sm font-medium overflow-x-auto">

        <!-- Pending Tab -->
        <button class="flex-1 py-2 rounded-full text-center"
          [ngClass]="selectedTab === 'pending' ? 'bg-white shadow text-gray-900' : 'text-gray-600'"
          (click)="selectedTab = 'pending'">
          Pending ({{ rebateData.length }})
        </button>

        <!-- Active Tab -->
        <button class="flex-1 py-2 rounded-full text-center"
          [ngClass]="selectedTab === 'active' ? 'bg-white shadow text-gray-900' : 'text-gray-600'"
          (click)="selectedTab = 'active'">
          Active ({{ activerebateData.length }})
        </button>

      </div>


      <!-- Filtered Records -->
      <div *ngIf="filteredRebates.length > 0; else noRecords" class="space-y-6">

        <div *ngFor="let rebate of filteredRebates" class="bg-white rounded-xl border shadow-sm p-6">

          <div class="flex flex-col md:flex-row md:justify-between">

            <div class="flex gap-4">

              <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center">
                <span class="material-icons text-gray-500">person</span>
              </div>

              <div>
                <p class="text-lg font-medium text-gray-800 flex items-center gap-2">
                  Rahul Kumar
                  <span class="text-xs px-3 py-1 rounded-full" [ngClass]="{
                    'bg-green-100 text-green-700': rebate.status === 'active',
                    'bg-yellow-100 text-yellow-700': rebate.status === 'pending'
                  }">
                    {{ rebate.status }}
                  </span>
                </p>

                <p class="text-sm text-gray-600 -mt-1">
                  {{rebate.roll_no}} • {{rebate.hostel}}
                </p>

                <div class="flex items-center gap-2 mt-2 text-sm">
                  <span class="material-icons text-gray-500 text-base">calendar_today</span>
                  <p>{{rebate.start_date}} - {{rebate.end_date}}</p>
                  <span class="px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-md">
                    {{rebate.duration}} Days
                  </span>
                </div>

                <p class="mt-3 text-gray-800 font-medium text-sm">Reason:</p>
                <p class="text-gray-600 text-sm mt-1">Rebate reason to be added as a feature.</p>
              </div>
            </div>

            <div class="mt-4 md:mt-0 flex flex-col justify-between items-end">
              <p class="text-xs text-gray-500 mb-3">Requested: 18 Nov 2025</p>

              <div *ngIf="rebate.status === 'pending'" class="flex gap-3">
                <button
                  class="flex items-center gap-1 text-red-600 text-sm border border-red-300 px-3 py-1.5 rounded-lg hover:bg-red-50"
                  (click)="updateRebateStatus(rebate.id, 'rejected')">
                  <span class="material-icons text-sm">close</span>
                  Reject
                </button>

                <button
                  class="flex items-center gap-1 text-green-600 text-sm border border-green-300 px-3 py-1.5 rounded-lg hover:bg-green-50"
                  (click)="updateRebateStatus(rebate.id, 'inactive')">
                  <span class="material-icons text-sm">check</span>
                  Approve
                </button>
              </div>
            </div>

          </div>

        </div>

      </div>

      <ng-template #noRecords>
        <div class="p-3 text-center text-muted">
          <h5>No rebate requests so far</h5>
        </div>
      </ng-template>

    </div>

  </div>
</div>
